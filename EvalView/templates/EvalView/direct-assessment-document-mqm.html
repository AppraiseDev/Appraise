{% extends "Dashboard/base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'EvalView/css/direct-assessment-document-mqm.css' %}">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<script src="{% static 'EvalView/js/direct-assessment-document-mqm.js' %}"></script>

{% endblock %}

{% block content %}

<div class="alert alert-info" style="margin-top: -55px;">
    <table style="width:100%">
        <tr>
            <td style="width:33%;text-align:left;">
                <strong id="task_progress">
                    {{completed_blocks}}/{{total_blocks}} documents,
                    <span id="items-left-counter">{{items_left_in_block}}</span>
                    items left in document
                </strong>
            </td>
            <td style="width:33%;text-align:center;">
                <strong>{{campaign}} #{{datask_id}}:Document #{{document_id}}-<span
                        id="current-item-id">{{item_id}}</span></strong>
            </td>
            <td style="width:33%;text-align:right;">
                <strong>{{source_language}} &rarr; {{target_language}}</strong>
            </td>
        </tr>
    </table>
</div>

<div class="question-box">
    {% include 'EvalView/_mqm_instructions.html' %}
</div>

{% for item,scores in items %}

<div id="item-{{ item.itemID }}" class="item-box quotelike active" data-item-id="{{ item.itemID }}"
    data-item-completed="{{ scores.completed }}" data-item-score="{{ scores.score }}">

    <form action="{{action_url}}" method="post">
        {% csrf_token %}

        <input name="start_timestamp" type="hidden" value="" />
        <input name="end_timestamp" type="hidden" value="" />
        <input name="item_id" type="hidden" value="{{ item.itemID }}" />
        <input name="task_id" type="hidden" value="{{ item.id }}" />
        <input name="document_id" type="hidden" value="{{ item.documentID }}" />
        <input name="score" type="hidden" value="{{ scores.score }}" id="score{{ item.itemID }}" />
        <input name="ajax" type="hidden" value="False" />

        <div class="source-box">
            <div class="row">
                <div class="col-sm-6">
                    <span title='Source sentence #{{ item.itemID|add:" 1" }}'>
                        <p>{{ item.sourceText }}</p>
                    </span>
                </div>

                <div class="{% if not monolingual %}col-sm-5{% else %}col-sm-11{% endif %}">
                    <span title='Candidate translation of source sentence #{{ item.itemID|add:" 1" }}'>
                        <p><strong>{{item.targetText|safe}}</strong></p>
                    </span>
                </div>
                <div class="col-sm-1">
                    <span class="source-btn-done glyphicon glyphicon-ok"></span>
                </div>
            </div>
        </div>

        <div class="target-box">
            <div class="row">
                {% include 'EvalView/_mqm_slider.html' %}
            </div>

            <table class="row action-box">
                <tr>
                    <td style="width:30%;text-align:left;">
                        <button class="btn button-reset" accesskey="2" type="reset">Reset</button>
                    </td>
                    <td style="width: 40%; text-align: center;">
                        Unfinished
                    </td>
                    <td style="width:30%;text-align:right;">
                        <button class="btn button-next btn-primary" name="next_button" accesskey="1" type="submit"
                            value="{{ item.itemID }}"> Submit</button>
                    </td>
                </tr>
            </table>
        </div>
    </form>
</div>

{% endfor %}
{% endblock %}